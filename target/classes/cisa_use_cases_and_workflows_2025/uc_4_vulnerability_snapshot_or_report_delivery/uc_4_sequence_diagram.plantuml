@startuml
	title Sequence Diagram: Vulnerability Snapshot or Report Delivery
	
	actor Customer
	participant "ServiceNow" as SN
	participant "Tier 3 Analyst" as T3
	participant "Data Engineer" as DE
	participant "Databricks"
	participant "Kibana"
	participant "Analytic Knowledge Base\n(ServiceNow/AWS S3)" as AKB
	participant "Production Staff" as Prod
	
	== Snapshot trigger ==
	Customer -> SN : expects Quarterly Snapshot
	SN -> T3 : alert: Snapshot Due Soon
	SN -> T3 : create snapshot ticket
	
	== Data Source Onboarding ==
	T3 -> SN : submit help desk request (new data source)
	SN -> DE : assign data mapping task
	DE -> SN : map fields to OCSF
	DE -> SN : normalize data
	DE -> Databricks : ingest data to warm storage
	
	== Data Exploration ==
	T3 -> Databricks : explore new dataset (Unity Catalog)
	Databricks -> Databricks : update data profile
	
	== Analysis ==
	T3 -> Databricks : create analytic notebook (correlation)
	T3 -> Kibana : generate visualizations
	
	== Handoff to Production ==
	T3 -> SN : hand off snapshot ticket
	T3 -> AKB : archive analysis artifacts
	
	== Production Steps ==
	SN -> Prod : notify: ticket assigned
	Prod -> SN : triage ticket
	Prod -> SN : complete product workflow
	Prod -> SN : generate reporting/collateral
	Prod -> SN : close ticket
	Prod -> Customer : deliver snapshot
	Customer -> Prod : provide feedback
	Prod -> SN : create new feedback workflow

@enduml
